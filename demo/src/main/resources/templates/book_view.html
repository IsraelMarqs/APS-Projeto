<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${book.title}">Livro</title>
    <style>
        body { font-family: Arial, Helvetica, sans-serif; max-width:700px; margin:40px auto }
        .card { border:1px solid #ddd; padding:20px; border-radius:6px }
        .btn { background:#4285F4; color:white; padding:8px 12px; border-radius:4px; text-decoration:none }
        .danger { background:#e74c3c }
        .meta { color:#555 }
    </style>
</head>
<body>
<div class="card">
    <h2 th:text="${book.title}">Título</h2>
    <div class="meta">Autores: <span th:text="${book.authors}"></span></div>
    <div class="meta" th:if="${book.publishedYear}">Ano: <span th:text="${book.publishedYear}"></span></div>
    <div class="meta" th:if="${book.publisher}">Editora: <span th:text="${book.publisher}"></span></div>
    <div class="meta">Categoria: <span th:text="${book.category}"></span></div>
    <div class="meta">Idioma: <span th:text="${book.language}"></span></div>
    <div class="meta">Localização: <span th:text="${book.location}"></span></div>
    <div class="meta">Contato: <strong th:text="${book.contactNumber}"></strong></div>
    <div class="meta" th:if="${book.owner != null}">Cadastrado por: <strong th:text="${book.owner.name}"></strong> (<span th:text="${book.owner.email}"></span>)</div>

    <div style="margin-top:12px">
        <a class="btn" th:href="@{/}">Voltar</a>

        <span th:if="${isOwner}">
            <a class="btn" th:href="@{/books/{id}/edit(id=${book.id})}" style="margin-left:8px">Editar</a>

            <form th:action="@{/books/{id}/delete(id=${book.id})}" method="post" style="display:inline-block;margin-left:8px">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <button type="submit" class="btn danger">Deletar</button>
            </form>
        </span>

        <span th:unless="${isOwner}">
            <a class="btn" th:href="@{/books/{id}/request(id=${book.id})}" style="margin-left:8px">Solicitar empréstimo</a>
        </span>
    </div>
</div>
</body>
</html>
