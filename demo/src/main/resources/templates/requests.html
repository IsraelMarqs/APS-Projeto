<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Meus Pedidos - Biblioconnect</title>
    <style>
        body { font-family: Inter, Arial, Helvetica, sans-serif; max-width:900px; margin:40px auto; background:#f6f8fb }
        .card { border:1px solid #e6e9ee; padding:18px; border-radius:10px; background:white; box-shadow:0 8px 30px rgba(2,6,23,0.04) }
        .request-item { border-radius:10px; padding:12px; margin-bottom:10px; background:linear-gradient(180deg,#fff,#fbfdff); border:1px solid #eef2ff }
        .muted { color:#6b7280 }
        .status { display:inline-block; padding:6px 10px; border-radius:999px; font-weight:600; font-size:0.85em }
        .PENDING { background:#fef3c7; color:#92400e }
        .ACCEPTED { background:#dcfce7; color:#166534 }
        .DECLINED { background:#fee2e2; color:#991b1b }
        a.btn { background:#4f46e5; color:white; padding:8px 12px; border-radius:8px; text-decoration:none }
        .small { font-size:0.9em; color:#374151 }
    </style>
</head>
<body>
<div class="card">
    <h2>Meus pedidos</h2>
    <div th:if="${#lists.isEmpty(requests)}" class="muted">Você ainda não fez nenhuma solicitação.</div>
    <div th:each="r : ${requests}" class="request-item">
        <div><strong th:text="${r.book.title}"></strong> <span class="muted">— <span th:text="${r.book.authors}"></span></span></div>
        <div class="small">Proprietário: <strong th:text="${r.book.owner.name}"></strong> (<span th:text="${r.book.owner.email}"></span>)</div>
        <div style="margin-top:8px">
            <span th:text="${#dates.format(r.createdAt,'dd/MM/yyyy HH:mm')}"></span>
            <span th:classappend="' status ' + ${r.status}" th:text="${r.status}"></span>
        </div>
        <div style="margin-top:8px" class="small" th:if="${r.message}">Mensagem: <span th:text="${r.message}"></span></div>
        <div style="margin-top:10px">
            <a th:href="@{/books/{id}(id=${r.book.id})}" class="btn">Ver livro</a>
        </div>
    </div>
</div>
</body>
</html>

